(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{8138:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/preview/[movieID]",function(){return s(3621)}])},9527:function(e,t,s){"use strict";var a=s(5893),r=s(875),o=s(5675),c=s.n(o),l=s(7294),i=s(134),n=s(7516),d=s(1163),u=s(4607),m=s(9828),g=s(6501),h=s(6801);let p=e=>{let{title:t,imageURL:s,movieID:o}=e,{setShowLoginModal:p,setSelectedMovieID:f,setSavedMovieIDS:v,savedMovieIDS:x}=(0,l.useContext)(i.Il),b=(0,d.useRouter)(),j=e=>{b.push("/preview/".concat(e)),f(e),localStorage.setItem("selectedMovieID",e)},k=async()=>{var e,a;let r=[...x];if(null===(e=u.lX.currentUser)||void 0===e?void 0:e.uid){console.log(null===(a=u.lX.currentUser)||void 0===a?void 0:a.uid),console.log(o);let e={title:t,id:o,uid:u.lX.currentUser.uid,backdrop_path:s,poster_path:s,description:""},c="user_bookmarks/".concat(u.lX.currentUser.uid,"/saved_bookmarks/").concat(o),l=localStorage.getItem("savedMovies")||"",i=(0,m.hJ)(u.mz,"user_bookmarks/".concat(u.lX.currentUser.uid,"/saved_bookmarks"));if(l.includes(o))!function(e,t){let s=g.ZP.loading("removing item...");(0,h.e)(e,t).then(e=>{console.log("result",e),g.ZP.dismiss(s),console.log("Item removed successfully"),g.ZP.success("Item removed successfully")}).catch(e=>{console.error("Error removing item:",e),g.ZP.dismiss(s),g.ZP.error("Error removing item:",e)})}(o.toString(),i);else{let t=g.ZP.loading("Loading...");await (0,m.pl)((0,m.JU)(u.mz,c),e).then(()=>{g.ZP.success("Added to bookmarks"),g.ZP.dismiss(t),r.push(o),v(r)}).catch(()=>{g.ZP.error("Error occured adding bookmark")}),localStorage.setItem("savedMovies",JSON.stringify(r))}}else console.log("login to save a movie"),p(!0)},y=()=>{console.log("Bookmark clicked"),k()},N=e=>{e.target instanceof SVGElement?y():j(o)};return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{style:{background:"rgba(169, 169, 169, 0.2)"},className:"max-w-[350px] rounded-md w-[280px] h-[400px] p-2 cursor-pointer ",onClick:N,children:[(0,a.jsx)(c(),{src:r.Ym+s||"/no_preview.jpg",alt:t,width:300,height:300,className:"h-[85%] object-cover rounded-md  bg-gray-400"}),(0,a.jsxs)("div",{className:"flex justify-between p-2 items-center",children:[(0,a.jsx)("p",{className:"w-[90%] max-lines-2",children:t}),Array.from(x).includes(o)?(0,a.jsx)(n.ASR,{size:28,className:"text-green-400"}):(0,a.jsx)(n.p4i,{size:28})]})]})})};t.Z=p},1865:function(e,t,s){"use strict";var a=s(5893);let r=()=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"lds-ring ",children:[(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{})]})});t.Z=r},875:function(e,t,s){"use strict";s.d(t,{Bu:function(){return l},Iq:function(){return o},Pg:function(){return c},Ym:function(){return r},r6:function(){return i}});let a="https://api.themoviedb.org/3/",r="https://image.tmdb.org/t/p/w1280";"".concat(a,"movie/popular?api_key=").concat("49aadc9bda210df9f0d47e374c404fd5","&language=en-US");let o="".concat(a,"discover/movie?api_key=").concat("49aadc9bda210df9f0d47e374c404fd5","&language=en-US"),c="".concat(a,"tv/popular?api_key=").concat("49aadc9bda210df9f0d47e374c404fd5","&language=en-US"),l="".concat(a,"trending/movie/day?api_key=").concat("49aadc9bda210df9f0d47e374c404fd5","&language=en-US"),i="".concat(a,"discover/movie?certification_country=US&certification.lte=G&sort_by=popularity.desc&api_key=").concat("49aadc9bda210df9f0d47e374c404fd5","&language=en-US");"".concat(a,"search/multi?api_key=").concat("49aadc9bda210df9f0d47e374c404fd5","&language=en-US&page=1")},3621:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var a=s(5893),r=s(875),o=s(5675),c=s.n(o),l=s(7294);let i=e=>{let{name:t,profile:s,id:o,character:l}=e;return(0,a.jsxs)("div",{style:{background:"rgba(169, 169, 169, 0.2)"},className:"max-w-[350px] rounded-md  p-2 cursor-pointer ",children:[(0,a.jsx)(c(),{src:r.Ym+s,alt:t,height:200,width:200,className:"object-cover h-[300px] w-[250px]"}),(0,a.jsx)("p",{children:t}),(0,a.jsxs)("p",{children:["As ",l]})]})};var n=s(9527),d=s(1865),u=s(7516);let m=e=>{let{videoId:t,onClose:s}=e,r=e=>{console.log("signal to close"),s()};return(0,a.jsxs)("div",{style:{background:"rgba(169, 169, 169, 0.3)"},className:"overflow-hidden bg-red-300 absolute inset-0 w-full z-[30] h-screen flex justify-center items-center",onClick:r,children:[(0,a.jsx)(u.czh,{size:32,onClick:s,className:"absolute right-10 top-6"}),(0,a.jsx)("div",{className:" w-[80%] h-[90%] rounded-lg",children:(0,a.jsx)("iframe",{className:"w-full h-full object-cover rounded-lg",width:"560",height:"315",src:"https://www.youtube.com/embed/".concat(t,"?rel=0&modestbranding=1"),title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})})]})};var g=s(4607),h=s(134),p=s(6801),f=s(8036),v=s(6154),x=s(9828),b=s(1163),j=s(6501);let k=()=>{var e;let[t,s]=(0,l.useState)(null),[o,k]=(0,l.useState)(null),[y,N]=(0,l.useState)("movie"),[w,_]=(0,l.useState)(!0),S=(0,b.useRouter)(),{setSelectedMovieID:U,selectedMovieID:Z,setShowLoginModal:P,savedMovieIDS:C,setSavedMovieIDS:E}=(0,l.useContext)(h.Il),[I,X]=(0,l.useState)([]),[z,A]=l.useState(!1),[M,D]=(0,l.useState)(8),J=async e=>{try{let[t,a,r,o]=await Promise.all([fetch("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat("49aadc9bda210df9f0d47e374c404fd5","&language=en-US")),fetch("https://api.themoviedb.org/3/tv/".concat(e,"?api_key=").concat("49aadc9bda210df9f0d47e374c404fd5","&language=en-US")),fetch("https://api.themoviedb.org/3/movie/".concat(e,"/credits?api_key=").concat("49aadc9bda210df9f0d47e374c404fd5","&language=en-US")),fetch("https://api.themoviedb.org/3/tv/".concat(e,"/credits?api_key=").concat("49aadc9bda210df9f0d47e374c404fd5","&language=en-US"))]);if(!t.ok&&!a.ok)throw Error("Failed to fetch movie and TV data");if(!r.ok&&!o.ok)throw Error("Failed to fetch movie Cast and TV Cast");let[c,l,i,n]=await Promise.all([t.json(),a.json(),r.json(),o.json()]);!function(e,t){let a={...e,...t};Object.keys(a).forEach(e=>{(null===a[e]||void 0===a[e]||""===a[e])&&delete a[e]}),s(a)}(c,l),console.log("movieCast",i),console.log("tvCast",n),i.cast&&i.cast.length>1?(k(i),N("movie")):n.cast&&n.cast.length>1?(console.log("tvCast found"),k(n),N("tv")):i.cast&&i.cast.length>1&&n.cast&&n.cast.length>1&&(console.log("both defined"),k(i),N("movie")),_(!1)}catch(e){console.error(e),_(!1)}},[O,T]=(0,l.useState)([]),F=e=>{let t="https://api.themoviedb.org/3/movie/".concat(e,"/similar?api_key=").concat("49aadc9bda210df9f0d47e374c404fd5","&language=en-US&page=1");v.Z.get(t).then(e=>{T(e.data.results)}).catch(e=>{console.error(e)})};(0,l.useEffect)(()=>{F(Z)},[Z]),(0,l.useEffect)(()=>{let e=localStorage.getItem("selectedMovieID"),t=localStorage.getItem("savedMovies");if(t)try{let e=JSON.parse(t);Array.isArray(e)&&E(e)}catch(e){console.error("Error parsing stored data:",e)}console.log(e),Z?J(Z):(U(e),J(e),console.log("no movie selected"))},[]);let R=async e=>{let t="".concat("https://api.themoviedb.org/3","/").concat(y,"/").concat(e,"/videos?api_key=").concat("49aadc9bda210df9f0d47e374c404fd5","&language=en-US");try{let e=await v.Z.get(t),s=e.data.results.filter(e=>"Trailer"===e.type||e.name.includes("Official"));A(!0),console.log(s),X(s)}catch(e){console.error(e)}finally{_(!1)}};l.useEffect(()=>{let e=localStorage.getItem("savedMovies");if(e)try{let t=JSON.parse(e);console.log("parsedData",t),Array.isArray(t)&&E(t)}catch(e){console.error("Error parsing stored data:",e)}},[]);let Y=async()=>{var e,s;let a=[...C];if(null===(e=g.lX.currentUser)||void 0===e?void 0:e.uid){console.log(null===(s=g.lX.currentUser)||void 0===s?void 0:s.uid),console.log(t);let e={title:t.title||t.name,id:t.id,uid:g.lX.currentUser.uid,backdrop_path:t.backdrop_path,poster_path:t.poster_path,description:t.overview},r="user_bookmarks/".concat(g.lX.currentUser.uid,"/saved_bookmarks/").concat(t.id),o=(0,f.hJ)(g.mz,"user_bookmarks/".concat(g.lX.currentUser.uid,"/saved_bookmarks")),c=localStorage.getItem("savedMovies")||"";if(c.includes(t.id))!function(e,t){let s=j.ZP.loading("removing item...");(0,p.e)(e,t).then(e=>{console.log("result",e),j.ZP.dismiss(s),console.log("Item removed successfully"),j.ZP.success("Item removed successfully")}).catch(e=>{console.error("Error removing item:",e),j.ZP.dismiss(s),j.ZP.error("Error removing item:",e)})}(t.id.toString(),o);else{let s=j.ZP.loading("Loading...");await (0,x.pl)((0,x.JU)(g.mz,r),e).then(()=>{j.ZP.success("Added to bookmarks"),j.ZP.dismiss(s),a.push(t.id),E(a)}).catch(()=>{j.ZP.error("Error occured adding bookmark")}),localStorage.setItem("savedMovies",JSON.stringify(a))}}else j.ZP.error("Login to save a movie"),P(!0)};return w?(0,a.jsx)("div",{className:"min-h-screen w-full flex justify-center items-center ",children:(0,a.jsx)(d.Z,{})}):t?t&&(0,a.jsxs)(a.Fragment,{children:[z&&(0,a.jsx)(m,{videoId:I[0].key,onClose:()=>A(!1)}),(0,a.jsxs)("div",{className:"w-[90rem] bg-[#040720] mb-10 p-4 mx-auto ",children:[(0,a.jsxs)("header",{className:"h-[500px] rounded-md  w-full bg-cover bg-no-repeat relative",style:{backgroundImage:"url(".concat(r.Ym+(t.backdrop_path||t.poster_path),")")},children:[(0,a.jsx)("button",{className:" bg-brand text-white m-3 p-2 px-4 rounded-md",onClick:()=>S.back(),children:"Back"}),(0,a.jsxs)("div",{className:"absolute bottom-6 mx-6",children:[(0,a.jsx)("h2",{className:"text-4xl font-bold ",children:t.title||t.name}),(0,a.jsx)("button",{className:" bg-brand p-2 px-4 rounded-md text-xl",onClick:()=>R(t.id),children:"Watch Trailer"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4  px-6 py-4  justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"border w-[150px] h-[120px] flex justify-center items-center text-3xl text-brand font-bold",children:t.vote_average.toFixed(1)}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("p",{className:"text-brand font-bold",children:"Status:"}),(0,a.jsx)("p",{children:t.status})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("p",{className:"text-brand font-bold",children:"Duration:"}),(0,a.jsxs)("p",{children:[t.runtime||t.episode_run_time," mins"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("p",{className:"text-brand font-bold",children:"Release Date:"}),(0,a.jsx)("p",{children:t.release_date||t.first_air_date})]})]})]}),(null==C?void 0:C.includes(t.id))?(0,a.jsxs)("div",{className:"flex gap-3 cursor-pointer text-green-400 ",onClick:Y,children:[(0,a.jsx)("p",{children:"Saved"}),(0,a.jsx)(u.p4i,{size:24})]}):(0,a.jsxs)("div",{className:"flex gap-3 cursor-pointer",onClick:Y,children:[(0,a.jsx)("p",{className:"text-lg",children:"Add to saved Trailers"}),(0,a.jsx)(u.p4i,{size:24})]})]}),(0,a.jsxs)("div",{className:"px-10 py-6 flex gap-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-brand ",children:"Description"}),(0,a.jsx)("p",{className:"max-w-[1000px]",children:t.overview})]}),(0,a.jsxs)("section",{className:"",children:[(0,a.jsx)("h2",{className:"text-center text-brand text-2xl font-semibold",children:"Movie Casts"}),(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("div",{className:"grid grid-cols-4 place-items-center  py-6 gap-4",children:o&&(null===(e=o.cast)||void 0===e?void 0:e.slice(0,M).map(e=>{let{name:t,profile_path:s,id:r,character:o}=e;return(0,a.jsx)(i,{name:t,profile:s,character:o,id:r},r)}))}),(0,a.jsx)("button",{className:" rounded-md  text-xl p-3 bg-[#ffffff12] w-full",onClick:()=>{8===M?D(-1):D(8)},children:8===M?" See All Casts":" See less Casts"})]}),(0,a.jsxs)("div",{className:" mt-4",children:[(0,a.jsx)("h2",{className:"text-center text-brand text-2xl font-semibold",children:" Recommended Movies For You"}),(0,a.jsx)("div",{className:"grid grid-cols-4 place-items-center  py-6 gap-4",children:O.map(e=>{let{title:t,name:s,id:r,poster_path:o}=e;return(0,a.jsx)(n.Z,{title:t||s,imageURL:o,movieID:r},r)})})]})]})]})]}):(0,a.jsxs)("div",{className:"flex  h-[90vh] w-full flex-1 items-center justify-center flex-col",children:[(0,a.jsx)(c(),{src:"/error.png",alt:"error",width:450,height:450}),(0,a.jsx)("p",{className:"text-xl",children:"Error getting movie data"})," "]})};var y=k}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8138)}),_N_E=e.O()}]);